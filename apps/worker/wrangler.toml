name = "chatkin-os-worker"
main = "src/index.ts"
compatibility_date = "2024-11-22"
compatibility_flags = ["nodejs_compat"]

[env.production]
name = "chatkin-os-worker"
routes = [
  { pattern = "chatkin.ai/api/*", zone_name = "chatkin.ai" }
]

[[env.production.r2_buckets]]
binding = "CHATKIN_BUCKET"
bucket_name = "chatkin-files"

[[env.production.r2_buckets]]
binding = "CHATKIN_TEMP_BUCKET"
bucket_name = "chatkin-files-temp"

[[r2_buckets]]
binding = "CHATKIN_BUCKET"
bucket_name = "chatkin-files"
preview_bucket_name = "chatkin-files-dev"

[[r2_buckets]]
binding = "CHATKIN_TEMP_BUCKET"
bucket_name = "chatkin-files-temp"
preview_bucket_name = "chatkin-files-temp-dev"

# Environment variables (set via wrangler secret put)
# ANTHROPIC_API_KEY
# SUPABASE_URL
# SUPABASE_ANON_KEY
# SENTRY_DSN (optional)
